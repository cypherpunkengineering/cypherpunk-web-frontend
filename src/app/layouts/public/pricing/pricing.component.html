<div class="masthead">
  <app-nav></app-nav>

  <h1 class="masthead-header header white">What kind of Cypherpunk are you?</h1>
  <div class="masthead-image"></div>
</div>

<div class="page">

  <div class="page-divider"></div>

  <app-price-boxes [btc]="showBTC"></app-price-boxes>

  <div class="page-divider bottom"></div>

  <div class="payment-selection">
    <div class="payment-bg">
      <div class="type-container" (click)="selectOption('cc')" [ngClass]="{'active': selectedOption === 'cc'}">
        <div class="icon-container">
          <img src="/assets/payment/credit-card.png">
        </div>
        <div class="type-title desktop">Credit Card</div>
        <div class="type-title mobile">CC</div>
      </div>

      <div class="type-container" (click)="selectOption('a')" [ngClass]="{'active': selectedOption === 'a'}">
        <div class="icon-container">
          <img src="/assets/payment/amazon.png">
        </div>
        <div class="type-title">Amazon</div>
      </div>

      <div class="type-container" (click)="selectOption('pp')" [ngClass]="{'active': selectedOption === 'pp'}">
        <div class="icon-container">
          <img src="/assets/payment/paypal.png">
        </div>
        <div class="type-title">PayPal</div>
      </div>

      <div class="type-container" (click)="selectOption('bc')" [ngClass]="{'active': selectedOption === 'bc'}">
        <div class="icon-container">
          <img src="/assets/payment/bitcoin.png">
        </div>
        <div class="type-title">Bitcoin</div>
      </div>
    </div>
  </div>

  <div class="payment-info">

    <div class="credit-card" *ngIf="selectedOption === 'cc'">
      <div class="separator">Create Account</div>
      <div class="line"></div>

      <div class="info">
        <p>
          <label>Email</label><br>
          <input type="email" placeholder="you@example.com" [(ngModel)]="email" (ngModelChange)="validateCCEmail()" (blur)="validateCCEmail(true)" [ngClass]="{'error': !validCCEmail && ccEmailTouched, 'success': validCCEmail && ccEmailTouched}">
        </p>
      </div>

      <div class="info">
        <p>
          <label>Password</label><br>
          <input type="password" [(ngModel)]="password" (ngModelChange)="validateCCPass()" (blur)="validateCCPass()" [ngClass]="{'error': !validCCPass && ccPassTouched, 'success': validCCPass && ccPassTouched}">
        </p>
      </div>

      <div class="separator">Card Details</div>
      <div class="line"></div>

      <div class="info">
        <p>
          <label>Name</label><br>
          <input type="text" placeholder="John Smith" [(ngModel)]="name" (ngModelChange)="validateCCName()" (blur)="validateCCName()" [ngClass]="{'error': !validCCName && ccNameTouched, 'success': validCCName && ccNameTouched}">
        </p>
      </div>

      <div class="info">
        <p>
          <label>Card Number</label><br>
          <input type="text" [(ngModel)]="cardNumber" (ngModelChange)="validateCCNumber()" (blur)="validateCCNumber()" [ngClass]="{'error': !validCCNumber && ccNumberTouched, 'success': validCCNumber && ccNumberTouched}">
        </p>
      </div>

      <div class="info">
        <p class="half">
          <label>Expiration Date</label><br>
          <input id="ccexpiry" type="text" placeholder="mm/yy" [(ngModel)]="expiryDate" (ngModelChange)="validateCCExpiry()" (blur)="validateCCExpiry()" [ngClass]="{'error': !validCCExpiry && ccExpiryTouched, 'success': validCCExpiry && ccExpiryTouched}" maxlength="5">
        </p>

        <p class="half">
          <label>CVV/CSC Code</label><br>
          <input id="cccvc" type="text" [(ngModel)]="cvc" (ngModelChange)="validateCCcvc()" (blur)="validateCCcvc()" [ngClass]="{'error': !validCCcvc && ccCVCTouched, 'success': validCCcvc && ccCVCTouched}" maxlength="4">
        </p>
      </div>

      <div class="info">
        <p>
          <label>Country</label><br>
          <select name="country" id="country" [(ngModel)]="country" (ngModelChange)="changeCountry()" (blur)="validateCountry()" [ngClass]="{'error': !validCountry && countryTouched, 'success': validCountry && countryTouched}">
            <option *ngFor="let country of countries" [value]="country.name">
              {{country.name}}
            </option>
          </select>
        </p>
      </div>

      <div class="info" *ngIf="showZip">
        <p>
          <label>Zip Code</label><br>
          <input type="text" [(ngModel)]="zipCode" (ngModelChange)="validateZipCode()" (blur)="validateZipCode()" [ngClass]="{'error': !validZipCode && zipCodeTouched, 'success': validZipCode && zipCodeTouched}">
        </p>
      </div>

      <div class="total">
        <img src="/assets/payment/total@2x.png" srcset="/assets/payment/total.png 500w, /assets/payment/total@2x.png 1000w" alt="Total">
        TOTAL: <span class="total-price">{{ plansService.selectedPlan.total }}</span>
      </div>

      <div class="total-line"></div>

      <div class="pay">
        <button class="btn blue" [disabled]="!validateCC() || ccButtonDisabled" (click)="getToken()">
          Join Now
        </button>
      </div>
    </div>

    <div class="amazon" *ngIf="selectedOption === 'a'">
      <div class="separator">Create Account</div>
      <div class="line"></div>

      <div class="info">
        <p>
          <label>Email</label><br>
          <input type="email" placeholder="you@example.com" [(ngModel)]="email" (ngModelChange)="validateCCEmail()" (blur)="validateCCEmail(true)" [ngClass]="{'error': !validCCEmail && ccEmailTouched, 'success': validCCEmail && ccEmailTouched}">
        </p>
      </div>

      <div class="info">
        <p>
          <label>Password</label><br>
          <input type="password" [(ngModel)]="password" (ngModelChange)="validateCCPass()" (blur)="validateCCPass()" [ngClass]="{'error': !validCCPass && ccPassTouched, 'success': validCCPass && ccPassTouched}">
        </p>
      </div>

      <div class="total">
        <img src="/assets/payment/total@2x.png" srcset="/assets/payment/total.png 500w, /assets/payment/total@2x.png 1000w" alt="Total">
        TOTAL: <span class="total-price">{{ plansService.selectedPlan.total }}</span>
      </div>

      <div class="total-line"></div>

      <div class="pay">
        <div id="AmazonPayButton"></div>

        <div id="walletWidgetDiv"></div>

        <div id="consentWidgetDiv"></div>
      </div>

      <div class="pay">
        <button id="payWithAmazon" class="btn blue" (click)="amazonButton()" [style.display]="'none'" [disabled]="!validatePP() || amButtonDisabled">
          Join Now
        </button>
      </div>
    </div>

    <div class="paypal" *ngIf="selectedOption === 'pp'">
      <div class="separator">Create Account</div>
      <div class="line"></div>

      <div class="info">
        <p>
          <label>Email</label><br>
          <input type="email" placeholder="you@example.com" [(ngModel)]="email" (ngModelChange)="validateCCEmail()" (blur)="validateCCEmail(true)" [ngClass]="{'error': !validCCEmail && ccEmailTouched, 'success': validCCEmail && ccEmailTouched}">
        </p>
      </div>

      <div class="info">
        <p>
          <label>Password</label><br>
          <input type="password" [(ngModel)]="password" (ngModelChange)="validateCCPass()" (blur)="validateCCPass()" [ngClass]="{'error': !validCCPass && ccPassTouched, 'success': validCCPass && ccPassTouched}">
        </p>
      </div>

      <div class="total">
        <img src="/assets/payment/total@2x.png" srcset="/assets/payment/total.png 500w, /assets/payment/total@2x.png 1000w" alt="Total">
        TOTAL: <span class="total-price">{{ plansService.selectedPlan.total }}</span>
      </div>

      <div class="total-line"></div>

      <div class="pay">
        <button class="btn blue" (click)="payWithPaypal()" [disabled]="!validatePP() || ppButtonDisabled">
          Join Now
        </button>
      </div>

      <form ngNoForm action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top" [style.display]="'none'">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="hidden" name="hosted_button_id" value="NUNG7U2CMN97W">
        <input type="hidden" name="custom" [(ngModel)]="userId + '|' + monthly1295">
        <input type="hidden" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_subscribeCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
        <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
        <button id="paypalMonthly" class="btn blue" name="submit">
          Monthly
        </button>
      </form>

      <form ngNoForm action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top" [style.display]="'none'">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="hidden" name="hosted_button_id" value="VNBSU3MTDPNEE">
        <input type="hidden" name="custom" [(ngModel)]="userId + '|' + annually9995">
        <input type="hidden" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_subscribe_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
        <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
        <button id="paypalAnnual" class="btn blue" name="submit">
          Annually
        </button>
      </form>

      <form ngNoForm action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top" [style.display]="'none'">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="hidden" name="hosted_button_id" value="KBUPJRS6WGBA2">
        <input type="hidden" name="custom" [(ngModel)]="userId + '|' + semiannually5995">
        <input type="hidden" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_subscribe_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
        <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
        <button id="paypalSemiannual" class="btn blue" name="submit">
          Semiannually
        </button>
      </form>
    </div>

    <div class="bitcoin" *ngIf="selectedOption === 'bc'">
      <div class="separator">Create Account</div>
      <div class="line"></div>

      <div class="info">
        <p>
          <label>Email</label><br>
          <input type="email" placeholder="you@example.com" [(ngModel)]="email" (ngModelChange)="validateCCEmail()" (blur)="validateCCEmail(true)" [ngClass]="{'error': !validCCEmail && ccEmailTouched, 'success': validCCEmail && ccEmailTouched}">
        </p>
      </div>

      <div class="info">
        <p>
          <label>Password</label><br>
          <input type="password" [(ngModel)]="password" (ngModelChange)="validateCCPass()" (blur)="validateCCPass()" [ngClass]="{'error': !validCCPass && ccPassTouched, 'success': validCCPass && ccPassTouched}">
        </p>
      </div>

      <div class="total">
        <img src="/assets/payment/total@2x.png" srcset="/assets/payment/total.png 500w, /assets/payment/total@2x.png 1000w" alt="Total">
        TOTAL:
        <span class="total-price">
          {{ '₿ ~' + plansService.selectedPlan.bcTotal + ' BTC' }}
        </span>
      </div>

      <div class="total-line"></div>

      <div class="pay">
        <button class="btn blue" (click)="payWithBitpay()" [disabled]="!validatePP() || bpButtonDisabled">
          Join Now
        </button>
      </div>

      <!-- Monthly -->
      <form ngNoForm action="https://bitpay.com/checkout" method="post" [style.display]="'none'">
        <input type="hidden" name="action" value="checkout" />
        <input type="hidden" name="posData" [(ngModel)]="posData" />
        <input type="hidden" name="data" value="rDNH1y1QGetIGfRuWqjAKXLfg/M+yFmdEmL6jDfljpyiMifqDnitepwtuBM1XWsM3JZsJsunyiis3x+PxJNk2tG5DB4yiohqE43caZjUoWV0wl+8HaocQLdwLLXu93Z62ACbxxOWpZGM72GiMcSuTWRURaK7v8SRxe6f9dryg0AwZxT4kZa1dBQVIk4Qx+R7PbWALwXYu11TpiEJWGnFjRYxzpbs79WqKVFX+dzGIrHAsGIfMYjsa66VDGjyc7j+4KHcmRApZIHDSkSzuYzZM7FXqm6XAFpLkM977eWen/yY36COx/z5yDqDeg+t0F+7E0RrQVDyTBjHDVcwlo68IQ==" />
        <input id="bitpayMonthly" type="image" src="https://bitpay.com/img/button-large.png" border="0" name="submit" alt="BitPay, the easy way to pay with bitcoins." >
      </form>

      <!-- annually -->
      <form ngNoForm action="https://bitpay.com/checkout" method="post" [style.display]="'none'">
        <input type="hidden" name="action" value="checkout" />
        <input type="hidden" name="posData" [(ngModel)]="posData" />
        <input type="hidden" name="data" value="rDNH1y1QGetIGfRuWqjAKXLfg/M+yFmdEmL6jDfljpyiMifqDnitepwtuBM1XWsM3JZsJsunyiis3x+PxJNk2tG5DB4yiohqE43caZjUoWXOpVB+SNYQuXiLGS4qiuu+TjxqTHwv7zpmMQ1p7tCyhIfb/etWs+DLUim3ODfcMGbz9wUlM+h9TFM6TH2fqrjmz/qqfkqx9SXkPHGEi63wzn52mSOAHM1UUF0cXjOoPfhPLLRkRuHM+I45xlUsTL8wu6adyAymMzqI///Rs1743hnQV+MFjCh0Yrjr+NNGKgqDUdlf7a4w4p7jdAssK8CIvN0zS6NHliZ0V+Tv1J24YQ==" />
        <input id="bitpayAnnual" type="image" src="https://bitpay.com/img/button-large.png" border="0" name="submit" alt="BitPay, the easy way to pay with bitcoins." >
      </form>

      <!-- semiannually -->
      <form ngNoForm action="https://bitpay.com/checkout" method="post" [style.display]="'none'">
        <input type="hidden" name="action" value="checkout" />
        <input type="hidden" name="posData" [(ngModel)]="posData" />
        <input type="hidden" name="data" value="rDNH1y1QGetIGfRuWqjAKXLfg/M+yFmdEmL6jDfljpyiMifqDnitepwtuBM1XWsM3JZsJsunyiis3x+PxJNk2tG5DB4yiohqE43caZjUoWUnDSNdYjQD7BvDvQ9pukYRvqANEc58kXeaC9Noq3t0UcOtAfh2kczNKsv2gpiFkI/8aPf6CYqoiePbm1Qnv0lGoNTYGrLpkM/f2WybURwvOd8if9ISDxiehsQPU3ULJlgifR/rxCvOUmhD07vliIUuF1LMHuBwTVQy4MBJxlafYIFBPso2JeXizI4Vg4MZF9/EEHgGfVmUkNuFsZEitTbgAD+qUJuRlpzh+cImYBT7Hw==" />
        <input id="bitpaySemiAnnual" type="image" src="https://bitpay.com/img/button-large.png" border="0" name="submit" alt="BitPay, the easy way to pay with bitcoins." >
      </form>

    </div>
  </div>

  <div class="upgrade">
    <a routerLink="/account">Already have an account? Upgrade here</a>
  </div>
</div>

<app-footer></app-footer>

<div class="modal" [ngClass]="{'open': modal.show}">
  <div class="background" (click)="modal.show = false" [ngClass]="{'open': modal.show}"></div>
  <div class="modal-content">
    <div class="modal-header">{{ modal.header}}</div>
    <div class="modal-line"></div>

    <div class="modal-body">
      <p>
        {{ modal.body}}
      </p>

      <a routerLink="/account" *ngIf="modal.link">My Account</a>
    </div>

    <div class="modal-footer">
      <button class="btn teal" (click)="modal.show = false">Close</button>
    </div>
  </div>
</div>

<app-loading [state]="loading"></app-loading>
