<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 2.6//EN" "http://www.tuckey.org/res/dtds/urlrewrite2.6.dtd">
<urlrewrite>

	<!-- rewrite appengine paths exactly as requested -->
	<rule>
		<from>^/_ah/(.*)</from>
		<to last="true">/_ah/$1</to>
	</rule>

	<!-- rewrite api paths exactly as requested -->
	<rule>
		<from>^/api/(.*)</from>
		<to last="true">/api/$1</to>
	</rule>
	<rule>
		<from>^/account/(.*)</from>
		<to last="true">/account/$1</to>
	</rule>
	<rule>
		<from>^/confirmation/(.*)</from>
		<to last="true">/confirmation/$1</to>
	</rule>

	<!-- spider crawler robots -->
	<rule>
		<method>GET</method>
		<condition name="user-agent">(bot|spider|snippet|pinterest|crawler|archiver|flipboardproxy|mediapartners|facebookexternalhit|quora|disqus)</condition>
		<from>^(.*)</from>
		<set type="status">404</set>
		<to last="true">null</to>
	</rule>

	<!-- angular routes -->
	<rule>
		<condition type="remote-addr" next="or">^208\.111\.48\.</condition>
		<condition type="remote-addr" next="or">^208\.111\.52\.</condition>
		<condition type="remote-addr">^127\.</condition>
		<from>^(.*)</from>
		<to last="true">/index.html</to>
	</rule>

	<!-- catchall handler -->
	<rule>
		<from>^(.*)</from>
		<set type="status">404</set>
		<to last="true">null</to>
	</rule>

</urlrewrite>
