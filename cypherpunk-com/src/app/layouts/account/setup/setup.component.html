<div class="masthead">
  <app-acc-nav></app-acc-nav>

  <h1 class="masthead-header header white">Setup</h1>
</div>

<div class="breadcrumb">
  <a routerLink="/account">Account</a> > Setup
</div>

<div class="content">

  <div class="header">Manual VPN/proxy Setup</div>

  <div class="vpn-select-container">
    <label for="vpnSelect">Choose a vpn client:</label>
    <select name="vpnSelect" id="vpn-select" [(ngModel)]="vpnSelect">
      <option value="openvpn">OpenVPN 2.3/2.4</option>
      <option value="ipsec">IPSec VPN</option>
      <option value="ike">IKEv2 VPN</option>
      <option value="proxy">HTTP/SOCKS Proxy</option>
    </select>
  </div>

  <hr>

  <div id="openvpn" class="vpn" [ngClass]="{'show': vpnSelect === 'openvpn'}">
    <div class="subheader">OpenVPN 2.3/2.4</div>

    <div class="privacy">
      <app-setup-credentials></app-setup-credentials>
    </div>

    <div class="location-select-container">
      <app-setup-hostname [(location)]="openvpnLocation" (update)="updateProfile()"></app-setup-hostname>
    </div>

    <div>
      <label for="cypherplay">Use CypherPlay?
        <input id="cypherplay" type="checkbox" [(ngModel)]="useCypherplay" (ngModelChange)="updateProfile()">
      </label>
    </div>

    <div>
      <label for="certs">View Certificate Separately?
        <input id="certs" type="checkbox" [(ngModel)]="splitTextFields" (ngModelChange)="updateProfile()">
      </label>
    </div>

    <div class="download-container">
      <button class="btn blue" (click)="downloadProfile()" [disabled]="!downloadButtonEnabled || !openvpnLocation.hostname">
        Download
      </button>
    </div>

    <div *ngIf="!splitTextFields">
      <div class="profile-container">
        <label>Profile</label>
        <textarea class="profile" [(ngModel)]="profile" readonly></textarea>
      </div>
    </div>

    <div *ngIf="splitTextFields">
      <div class="profile-container">
        <label>Profile</label>
        <textarea class="profile" [(ngModel)]="profilePartial" readonly></textarea>
      </div>

      <div class="profile-container">
        <label>Certificate</label>
        <textarea class="profile" [(ngModel)]="profileCert" readonly></textarea>
      </div>
    </div>

    <div class="download-container">
      <button class="btn blue" (click)="downloadProfile()" [disabled]="!downloadButtonEnabled || !openvpnLocation.hostname">
        Download
      </button>
    </div>
  </div>

  <div id="ipsec" class="vpn" [ngClass]="{'show': vpnSelect === 'ipsec'}">
    <div class="subheader">IPSec VPN</div>

    <div class="privacy">
      <app-setup-credentials></app-setup-credentials>
      <br><br>
      <app-setup-hostname [(location)]="ipsecLocation" (update)="updateProfile()"></app-setup-hostname>
    </div>
  </div>

  <div id="ike" class="vpn" [ngClass]="{'show': vpnSelect === 'ike'}">
    <div class="subheader">IKEv2 VPN</div>

    <div class="privacy">
      <app-setup-credentials></app-setup-credentials>
      <br><br>
      <app-setup-hostname [(location)]="ikeLocation" (update)="updateProfile()"></app-setup-hostname>
    </div>
  </div>

  <div id="http" class="vpn" [ngClass]="{'show': vpnSelect === 'proxy'}">
    <div class="subheader">HTTP/SOCKS Proxy</div>

    <div class="privacy">
      <app-setup-credentials></app-setup-credentials>
      <br><br>
      <app-setup-hostname [(location)]="httpLocation" (update)="updateProfile()"></app-setup-hostname>

      <span>
        <strong>Ports to use:</strong> <br>
        http:// -> 80<br>
        https:// -> 3128<br>
        socks5:// -> 1080<br>
        cypherplay (non-tls) -> 4<br>
        cypherplay (tls) -> 516
      </span>
    </div>
  </div>
</div>

<div class="return">
  <a routerLink="/account">Back to Account</a>
</div>

<app-footer></app-footer>

<app-loading [state]="loading"></app-loading>
